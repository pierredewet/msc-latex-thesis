\usepackage{classicthesis}
\usepackage[left=2.54cm,right=2.54cm,top=3cm,bottom=3cm,includehead,includefoot]{geometry}

% Custom user settings
\input{./settings/UserSettings.tex}

% Chapter number to the left of the chapter title
\ifthenelse{\boolean{@eulerchapternumbers}}% font for the chapter numbers
    {\newcommand\mychapterNumber{\fontencoding{U}\fontfamily{eur}\fontseries{b}\fontsize{18}{19}\selectfont}}%
    {\newcommand\mychapterNumber{\fontencoding{T1}\fontfamily{pplj}\fontsize{25}{26}\selectfont}}

\ifthenelse{\boolean{@linedheaders}}%
    {%
    \titleformat{\chapter}[block]%
        {\relax}{\titlerule\vspace*{.9\baselineskip}\\\raggedleft{\color{halfgray}\mychapterNumber\thechapter}}{1.2em}%
        {\raggedright\spacedallcaps}[\normalsize\vspace*{.8\baselineskip}\titlerule]%
    }{%
    \titleformat{\chapter}[block]%
        {\relax}{{\color{halfgray}\mychapterNumber\thechapter}}{1.2em}%
        {\raggedright\spacedallcaps}[\normalsize\vspace*{.8\baselineskip}\titlerule]%
    }

\usepackage{xcolor}
\usepackage{lipsum}
\usepackage[pdftex]{graphicx}
\usepackage{wrapfig} %wrap text around figures

%Better tables
\usepackage{booktabs}
\usepackage{siunitx}
\usepackage{multirow}
\newcommand{\head}[1]{\textnormal{\textbf{#1}}}
\newcommand{\normal}[1]{\multicolumn{1}{l}{#1}}
\usepackage[font=small,skip=6pt,justification=centering,position=bottom]{caption} %space between figure/table and caption

% font warnings
\usepackage{textcomp}
\usepackage[T1]{fontenc}
\usepackage{ucs}
\usepackage[utf8x]{inputenc}

\usepackage[english]{babel}
\usepackage[nottoc]{tocbibind}

% Insert appendix
\usepackage[toc,page]{appendix}

%Code listings
\usepackage{listings}
\usepackage{color}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.90,0.90,0.90} 
% define general listing settings
\lstdefinestyle{numbers}{numbers=left, stepnumber=1, numberstyle=\small\color{gray}, numbersep=10pt}
\lstdefinestyle{myFrame}{backgroundcolor=\color{backcolour}, frame=shadowbox, breaklines=true, breakatwhitespace=true, tabsize=4, showstringspaces=false}
\lstdefinestyle{myCode}{keywordstyle=\color{blue}, commentstyle=\color{dkgreen}, stringstyle=\color{mauve}, aboveskip=3mm, belowskip=3mm, columns=flexible}
\lstdefinestyle{mySQL}{language=SQL, style=numbers,style=myFrame, style=myCode}
\lstdefinestyle{myC++}{language=C++, style=numbers,style=myFrame, style=myCode}
\lstdefinestyle{myJava}{language=Java, style=numbers,style=myFrame, style=myCode}

\usepackage{hyperref}
\hypersetup{colorlinks=true, linktocpage=true, pdfstartpage=1, pdfstartview=FitV,%
    breaklinks=true, pdfpagemode=UseNone, pageanchor=true, pdfpagemode=UseOutlines,%
    plainpages=false, bookmarksnumbered, bookmarksopen=true, bookmarksopenlevel=1,%
    hypertexnames=true, pdfhighlight=/O, urlcolor=webbrown, linkcolor=RoyalBlue, citecolor=blue, %
    pdftitle={},%
    pdfauthor={},%
    pdfsubject={},%
    pdfkeywords={},%
    pdfcreator={pdfLaTeX},%
    pdfproducer={}%
}   

\makeatother

% Align TOC page numbers to the right
\renewcommand{\cftpartleader}{\hfill}
\renewcommand{\cftpartafterpnum}{\cftparfillskip}
\renewcommand{\cftchapleader}{\hfill} 
\renewcommand{\cftsecleader}{\hfill}
\renewcommand{\cftsubsecleader}{\hfill}
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}} % add dots to toc section
\renewcommand{\cftsubsecleader}{\cftdotfill{\cftdotsep}} % add dots to toc subsection
\renewcommand{\cftchapfont}{\bfseries\color{red}} %orange chapter font?

\usepackage{bookmark}

%TOC styling
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
% \usepackage[subfigure]{tocloft} % subfigure option only if using subfigure package
\renewcommand{\cfttoctitlefont} % ToC title
          {\usefont{T1}{qhv}{b}{n}\selectfont\huge}
\renewcommand{\cftchapfont} % chapter titles
          {\usefont{T1}{qhv}{b}{n}\selectfont}
\renewcommand{\cftsecfont} % section titles
          {\usefont{T1}{bch}{m}{n}\selectfont}
\renewcommand{\cftsubsecfont} % subsection titles
          {\usefont{T1}{bch}{m}{n}\selectfont} 
\renewcommand{\cftchappagefont} % chapter page numbers
          {\usefont{T1}{bch}{b}{n}\selectfont}
\renewcommand{\cftsecpagefont} % section page numbers
          {\cftsecfont} 
\renewcommand{\cftsubsecpagefont} % subsection page numbers
          {\cftsubsecfont}

% LoF/LoT styling
\renewcommand{\cftfigleader}{\cftdotfill{\cftdotsep}}
\renewcommand{\cfttableader}{\hfill}
\renewcommand{\cfttableader}{\cftdotfill{\cftdotsep}}

\makeatletter
\renewcommand*{\numberline}[1]
{%
  \hb@xt@\@tempdima{\hfil#1 }%
}

% Style chapters, sections etc
\usepackage{titlesec}
\usepackage{parskip}

\setlength{\parskip}{6pt}
\titlespacing*{\chapter}
{0pt}{-26pt}{18pt}%{left space}{before space}{after space}
\titlespacing*{\section}
{0pt}{0pt}{18pt}%{left space}{before space}{after space}
\titlespacing*{\subsection}
{0pt}{0pt}{18pt}
\titleformat{\section}
{\normalfont\fontsize{12}{15}\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}
{\normalfont\fontsize{12}{15}\bfseries}{\thesubsection}{1em}{}

% Custom footer
\usepackage{scrpage2}
\pagestyle{scrheadings}
\clearscrheadfoot
\ifoot[\studentfullname{}]{\studentfullname{}}
\cfoot[\pagemark]{\pagemark}

% Style bib
\usepackage{natbib}
\bibliographystyle{abbrvnat}
\setcitestyle{authoryear,open={(},close={)}}
